language: php

php:
  - 5.5
  - 5.6
  - 7.0
  - hhvm

before_install:
  - composer self-update

install:
  - composer create-project laravel/laravel
  - cd ./laravel
  - composer require "molovo/laravel-model-traits:${TRAVIS_BRANCH}@dev"
  - composer update

before_script:
  - cp ./vendor/molovo/laravel-model-traits/.env.travis .env
  - export APP_ENV="testing"
  - php artisan migrate --path ./vendor/molovo/laravel-model-traits/tests/Support/migrations
  - cd ./vendor/molovo/laravel-model-traits

script: ../../../vendor/bin/phpunit --verbose